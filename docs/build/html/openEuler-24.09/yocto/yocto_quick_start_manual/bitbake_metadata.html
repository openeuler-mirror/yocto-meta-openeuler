<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bitbake 与 元数据 &mdash; openEuler Embedded在线文档 24.03 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="基本文件解析逻辑" href="basic_parsing_logic.html" />
    <link rel="prev" title="yocto 工程快速入门" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> openEuler Embedded在线文档
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">介绍与概述</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">总体介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">快速上手</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">版本说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../test_data/index.html">测试数据</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">指导手册</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/index.html">用户使用指导</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/index.html">开发及贡献指导</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">常见问题</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../references/index.html">参考文档</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../references/references_doc.html">参考文献</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bitbake/index.html">BitBake 手册</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">yocto 手册</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../overview.html">Yocto介绍</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">yocto 工程快速入门</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Bitbake 与 元数据</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id1">一、获取 BitBake</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id2">二、配置 BitBake 运行环境</a></li>
<li class="toctree-l5"><a class="reference internal" href="#hello-world">三、编写 Hello World 示例</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id3">小结</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="basic_parsing_logic.html">基本文件解析逻辑</a></li>
<li class="toctree-l4"><a class="reference internal" href="variables_and_tasks.html">变量与任务</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../recipe.html">Yocto 标准配方解析</a></li>
<li class="toctree-l3"><a class="reference internal" href="../meta-openeuler.html">openeuler层结构及演进策略</a></li>
<li class="toctree-l3"><a class="reference internal" href="../exploration.html">深入Yocto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../poky4.0.html">yocto poky 4.0 语法变更</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addpackage_guide.html">新增配方支持指导</a></li>
<li class="toctree-l3"><a class="reference internal" href="../image_develop.html">镜像定制</a></li>
<li class="toctree-l3"><a class="reference internal" href="../container_environment.html">openEuler Embedded 开发容器环境介绍</a></li>
<li class="toctree-l3"><a class="reference internal" href="../priority.html">Yocto 元数据优先级</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sstate.html">share state 机制</a></li>
<li class="toctree-l3"><a class="reference internal" href="../devshell.html">Yocto 实现终端应用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../partitioned_image.html">使用 yocto 创建分区镜像</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openeuler_src_uri_remove.html">OPENEULER_SRC_URI_REMOVE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../add_package_src.html">如何添加或修改软件包源</a></li>
<li class="toctree-l3"><a class="reference internal" href="../yocto_manual/index.html">yocto 手册参考</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">openEuler Embedded在线文档</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../references/index.html">参考文档</a> &raquo;</li>
          <li><a href="../index.html">yocto 手册</a> &raquo;</li>
          <li><a href="index.html">yocto 工程快速入门</a> &raquo;</li>
      <li>Bitbake 与 元数据</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bitbake">
<span id="bitbake-and-metadata"></span><h1>Bitbake 与 元数据<a class="headerlink" href="#bitbake" title="Permalink to this headline">¶</a></h1>
<p>yocto工程的主要组成部分是bitbake工具与元数据。bitbake是一个通用任务执行引擎，元数据文件主要分为conf、bbclass、bb文件。bitbake与元数据的关系类似于gcc与c代码。</p>
<p>一门新的语言的学习往往从编写 <code class="docutils literal notranslate"><span class="pre">hello</span> <span class="pre">world</span></code> 开始，bitbake也是如此。本教程介绍了如何创建一个yocto项目以及bitbake构建该项目所需的适用元数据文件。以下从一个新用户的角度来使用bitbake工具构建 <code class="docutils literal notranslate"><span class="pre">hello</span> <span class="pre">world</span></code> 程序。</p>
<p>本节将通过编写一个简单的 <code class="docutils literal notranslate"><span class="pre">printhello.bb</span></code> 探讨bitbake与元数据文件之间的关联。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>小知识：bitbake英文直译为烘培，bb文件也被称为recipe文件，意为食谱、配方。bitbake构建目标的主要形式是 <code class="docutils literal notranslate"><span class="pre">bitbake</span> <span class="pre">recipe_name</span></code>，组合在一起意思就是根据食谱完成烘培。</p>
</div>
<section id="id1">
<h2>一、获取 BitBake<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">Bitbake官网链接：<a class="reference external" href="https://github.com/openembedded/bitbake">https://github.com/openembedded/bitbake</a></div>
<div class="line">建议下载Poky仓库，Poky是yocto工程的一个参考发行版，仓库中配套了对应的bitbake程序。步骤如下：</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://git.yoctoproject.org/poky
$ cd poky/bitbake
</pre></div>
</div>
<p>如下载速度过慢，可以选择浅克隆指定分支代码下载或者从openEuler下载。步骤如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://gitee.com/openeuler/yocto-poky.git -b v4.0.10
$ cd yocto-poky/bitbake
</pre></div>
</div>
<p>以下测试以openEuler上下载的yocto-poky仓库为例。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>BitBake最初是OpenEmbedded项目的一部分。2004年，OpenEmbedded项目被拆分为BitBake与OpenEmbedded（元数据集）。
Poky在结合bitbake与OpenEmbedded部分的基础上，创建了自己的发行版。</p>
</div>
</section>
<section id="id2">
<h2>二、配置 BitBake 运行环境<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>将bitbake路径添加到shell环境中，以便能从任何目录运行bitbake。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export PATH=/path/to/bitbake/bin:$PATH
$ bitbake --version
BitBake Build Tool Core version 1.50.0
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>/path/to/为目录实际路径。</p>
</div>
</section>
<section id="hello-world">
<h2>三、编写 Hello World 示例<a class="headerlink" href="#hello-world" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p><strong>创建工程目录：</strong> 创建一个目录，bitbake在此目录完成所有的构建工作。</p></li>
</ol>
<blockquote>
<div><p>家目录创建 <code class="file docutils literal notranslate"><span class="pre">hello/</span></code> 文件夹。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir $HOME/hello
$ cd $HOME/hello
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p><strong>运行 bitbake：</strong> 在 <code class="file docutils literal notranslate"><span class="pre">hello/</span></code> 目录运行bitbake，当前目录为空。</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ bitbake
ERROR: Unable to find conf/bblayers.conf or conf/bitbake.conf. BBPATH is unset and/or not in a build directory?
</pre></div>
</div>
<p>前半段错误提示缺失相关文件，后半段提示没有配置BBPATH变量或者是没有在构建目录中。</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p><strong>设置 BBPATH：</strong> BBPATH与PATH使用方法类似，bitbake在BBPATH设置路径下查找需要的 <code class="file docutils literal notranslate"><span class="pre">conf/xxx.conf</span></code> 文件，若没有设置，则在当前目录查找需要的文件。</p></li>
</ol>
<blockquote>
<div><p>设置BBPATH为工程目录。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ BBPATH=&quot;$HOME/hello&quot;
$ export BBPATH
$ bitbake
ERROR: Unable to find conf/bblayers.conf or conf/bitbake.conf. BBPATH is unset and/or not in a build directory?
</pre></div>
</div>
<p>相同的错误。</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p><strong>创建 conf/bitbake.conf：</strong> bitbake.conf是yocto的底层配置文件，配置主要的变量。</p></li>
</ol>
<blockquote>
<div><p>工程目录创建一个空的 <code class="file docutils literal notranslate"><span class="pre">conf/bitbake.conf</span></code> 文件。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir conf
$ touch conf/bitbake.conf
ERROR: ParseError in configuration INHERITs: Could not inherit file classes/base.bbclass
</pre></div>
</div>
<p>错误提示缺失 <code class="file docutils literal notranslate"><span class="pre">classes/base.bbclass</span></code> 文件。</p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p><strong>创建 classes/base.bbclass：</strong> base.bbclass是类文件，yocto配置通用任务的必需文件。</p></li>
</ol>
<blockquote>
<div><p>工程目录创建一个空的 <code class="file docutils literal notranslate"><span class="pre">classes/base.bbclass</span></code> 文件。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir classes
$ touch classes/base.bbclass
$ bitbake
ERROR: Please set the &#39;PERSISTENT_DIR&#39; or &#39;CACHE&#39; variable
</pre></div>
</div>
<p>错误提示没有配置相关变量。</p>
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p><strong>配置必要的变量：</strong> bitbake.conf文件是yocto的底层配置文件，其中定义了大部分构建需要的变量，如PN、PV、CFLAGS、PATH等等，此处仅配置构建需要的最基本变量。</p></li>
</ol>
<blockquote>
<div><p>编写 <code class="file docutils literal notranslate"><span class="pre">conf/bitbake.conf</span></code> 文件，添加如下行：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># bitbake根据找到的conf文件路径自动生成TOPDIR变量
# 临时变量，为了方便配置，也可以不设置
TMPDIR  = &quot;${TOPDIR}/tmp&quot;
# 指定BitBake用于存储元数据缓存的目录，这样就不需要每次启动BitBake时都对其进行解析。
CACHE = &quot;${TMPDIR}/cache&quot;
# 指定用于创建配方戳文件的基本路径。实际戳文件的路径是通过对该字符串求值，然后附加附加信息来构建的。
STAMP   = &quot;${TMPDIR}/${PN}/stamps&quot;
# 指向BitBake在构建特定配方时放置临时文件的目录，这些文件主要由任务日志和脚本组成。
T = &quot;${TMPDIR}/${PN}/work&quot;
$ bitbake
Nothing to do.  Use &#39;bitbake world&#39; to build everything, or run &#39;bitbake --help&#39; for usage information.
</pre></div>
</div>
<p>至此，运行bitbake命令成功。然而，你可以发现bitbake其实没有做任何事情，这时需要创建一个bb文件让bitbake去完成一些任务。</p>
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p><strong>创建一个层（layer）：</strong> 层是元数据的集合。</p></li>
</ol>
<blockquote>
<div><p>在这样一个小的例子创建一个层并不那么必要，但创建一个层是一个好的实践，方便保持你的代码独立于bitbake使用的通用元数据。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $HOME
$ mkdir meta-mylayer
$ cd meta-mylayer
$ mkdir conf
$ cd conf
</pre></div>
</div>
<p>一个层中必须存在 <code class="file docutils literal notranslate"><span class="pre">conf/layer.conf</span></code> 文件，定义层bb文件所在位置等。编写 <code class="file docutils literal notranslate"><span class="pre">conf/layer.conf</span></code> 文件，添加如下行：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 添加BBPATH路径，LAYERDIR表示当前层的路径</span>
<span class="n">BBPATH</span> <span class="o">.=</span> <span class="s2">&quot;:$</span><span class="si">{LAYERDIR}</span><span class="s2">&quot;</span>
<span class="c1"># 添加路径，查找bb文件；&#39;*&#39;是任意匹配符</span>
<span class="n">BBFILES</span> <span class="o">+=</span> <span class="s2">&quot;$</span><span class="si">{LAYERDIR}</span><span class="s2">/recipes-*/*.bb&quot;</span>
<span class="c1"># 当前配置层的名称，可自定义</span>
<span class="n">BBFILE_COLLECTIONS</span> <span class="o">+=</span> <span class="s2">&quot;mylayer&quot;</span>
<span class="n">BBFILE_PATTERN_mylayer</span> <span class="o">:=</span> <span class="s2">&quot;^$</span><span class="si">{LAYERDIR}</span><span class="s2">/&quot;</span>
<span class="c1"># 当前层的优先级</span>
<span class="n">BBFILE_PRIORITY_mylayer</span> <span class="o">=</span> <span class="s2">&quot;5&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>层命名习惯以 <code class="docutils literal notranslate"><span class="pre">meta-</span></code> 开头；</p></li>
<li><p>如果不想创建一个层可以将下述语句添加到 <code class="file docutils literal notranslate"><span class="pre">bitbake.conf</span></code> 中，以便构建时能找到对应的bb文件。</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">BBFILES</span> <span class="pre">+=</span> <span class="pre">&quot;/path/to/*.bb&quot;</span></code></p>
</div></blockquote>
</li>
</ul>
</div>
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p><strong>创建一个bb文件：</strong> bb文件定义此目标需要完成的任务。</p></li>
</ol>
<blockquote>
<div><p>编写 <code class="file docutils literal notranslate"><span class="pre">recipes-hello/printhello.bb</span></code> 文件，添加如下内容：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 包的描述信息</span>
<span class="n">DESCRIPTION</span> <span class="o">=</span> <span class="s2">&quot;Prints Hello World&quot;</span>
<span class="c1"># 定义包名，bitbake $PN</span>
<span class="n">PN</span> <span class="o">=</span> <span class="s2">&quot;printhello&quot;</span>
<span class="c1"># 包的版本号</span>
<span class="n">PV</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>

<span class="c1"># 定义一个python任务，输出&quot;Hello, World!&quot;</span>
<span class="c1"># 也可以定义shell任务，去除do_build前的python即可，使用shell语法进行打印输出，这里不作例子</span>
<span class="n">python</span> <span class="n">do_build</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1"># bb.plain是yocto实现的打印函数，根据打印信息要求还有debug、warn、error等</span>
    <span class="n">bb</span><span class="o">.</span><span class="n">plain</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">);</span>
    <span class="n">bb</span><span class="o">.</span><span class="n">plain</span><span class="p">(</span><span class="s2">&quot;*                  *&quot;</span><span class="p">);</span>
    <span class="n">bb</span><span class="o">.</span><span class="n">plain</span><span class="p">(</span><span class="s2">&quot;*  Hello, World!   *&quot;</span><span class="p">);</span>
    <span class="n">bb</span><span class="o">.</span><span class="n">plain</span><span class="p">(</span><span class="s2">&quot;*                  *&quot;</span><span class="p">);</span>
    <span class="n">bb</span><span class="o">.</span><span class="n">plain</span><span class="p">(</span><span class="s2">&quot;********************&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1"># 添加任务</span>
<span class="n">addtask</span> <span class="n">do_build</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">do_build</span></code> 是yocto默认执行的任务。如果定义为其它的任务名执行时需要加上-c的参数，执行如下：</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">bitbake</span> <span class="pre">recipe_name</span> <span class="pre">-c</span> <span class="pre">task_name</span></code></p>
</div></blockquote>
</div>
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p><strong>运行bitbake构建目标：</strong></p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $HOME/hello
$ bitbake printhello
ERROR: no recipe files to build, check your BBPATH and BBFILES?
Loading cache: 100% |                                                                                                       | ETA:  --:--:--
Loaded 0 entries from dependency cache.
ERROR: Nothing PROVIDES &#39;printhello&#39;

Summary: There were 2 ERROR messages shown, returning a non-zero exit code.
</pre></div>
</div>
<p>错误提示找不到bb文件，显然我们并没有对构建路径（hello/）与所加层的路径（meta-mylayer/）添加关联。</p>
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p><strong>创建conf/bblayers.conf：</strong> bitbake使用 <code class="file docutils literal notranslate"><span class="pre">conf/bblayers.conf</span></code> 文件去定位工程构建时所用到的层。</p></li>
</ol>
<blockquote>
<div><p>编写 <code class="file docutils literal notranslate"><span class="pre">conf/bblayers.conf</span></code> 文件，添加内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># 列出构建时用到的层
BBLAYERS ?= &quot; \
    /path/to/meta-mylayer \
&quot;
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p><strong>再次运行bitbake构建目标：</strong></p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $HOME/hello
$ bitbake printhello
Parsing recipes: 100% |######################################################################################################| Time: 0:00:00
Parsing of 1 .bb files complete (0 cached, 1 parsed). 1 targets, 0 skipped, 0 masked, 0 errors.
NOTE: Resolving any missing task queue dependencies
Initialising tasks: 100% |###################################################################################################| Time: 0:00:00
NOTE: No setscene tasks
NOTE: Executing Tasks
********************
*                  *
*  Hello, World!   *
*                  *
********************
NOTE: Tasks Summary: Attempted 1 tasks of which 0 didn&#39;t need to be rerun and all succeeded.
</pre></div>
</div>
<p>构建成功。如果再次运行 bitbake printhello 将不会打印相同的输出，原因是，当printhello.bb配方的do_build任务第一次成功执行时，BitBake会为该任务写入一个stamp文件。因此下次尝试使用相同的bitbake命令运行任务时，bitbake会注意到戳，因此确定不需要重新运行任务。如果删除tmp目录然后重新运行构建，将再次打印”Hello, World!”消息。</p>
<p>最终目录结构如下：:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tree hello/
hello/
├── classes
│   └── base.bbclass
└── conf
    ├── bblayers.conf
    └── bitbake.conf

$ tree meta-mylayer/
meta-mylayer/
├── conf
│   └── layer.conf
└── recipes-hello
    └── printhello.bb
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>到此，是否注意到 <code class="file docutils literal notranslate"><span class="pre">base.bbclass</span></code> 没有任何内容，试着把 <code class="file docutils literal notranslate"><span class="pre">printhello.bb</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">do_build</span></code> 任务定义与 <code class="docutils literal notranslate"><span class="pre">addtask</span> <span class="pre">build</span></code> 移到 <code class="file docutils literal notranslate"><span class="pre">base.bbclass</span></code> 重新构建试试；下一步创建一个新的bb，这个bb并不需要添加 <code class="docutils literal notranslate"><span class="pre">addtask</span> <span class="pre">build</span></code> 语句也可以执行 <code class="docutils literal notranslate"><span class="pre">do_build</span></code> 任务。</p>
</div>
</div></blockquote>
</section>
<section id="id3">
<h2>小结<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>yocto项目依托于bitbake工具，存在了比较完善的元数据文件，包括bitbake.conf与base.bbclass，这两个文件在 <a class="reference external" href="https://git.openembedded.org/openembedded-core/tree/meta">OpenEmbedded</a> 中已有定义，用户可以在此基础上进行开发。在初步接触到yocto项目时，用户总会感慨这个项目的庞大，本文档从bitbake工具开始，从根剖析，完成了一个helloworld程序，当学习yocto工程的语法后，用户会了解到工程中大部分的文件都是通过bitbake.conf与base.bbclass文件运行的。</p></li>
<li><p>bblayers.conf与layer.conf作用是管理层文件，当进行某一个项目开发时，独立的层更加易于模块化实现。通过这种模块化设计，开发者可以更容易地管理和扩展他们的项目，确保各个功能组件的独立性和可重用性。</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="yocto 工程快速入门" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="basic_parsing_logic.html" class="btn btn-neutral float-right" title="基本文件解析逻辑" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, openEuler Embedded.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: openEuler-24.09
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Branches</dt>
      <dd><a href="../../../master/yocto/yocto_quick_start_manual/bitbake_metadata.html">master</a></dd>
      <dd><a href="../../../openEuler-21.09/index.html">openEuler-21.09</a></dd>
      <dd><a href="../../../openEuler-22.03-LTS/index.html">openEuler-22.03-LTS</a></dd>
      <dd><a href="../../../openEuler-22.03-LTS-SP1/index.html">openEuler-22.03-LTS-SP1</a></dd>
      <dd><a href="../../../openEuler-22.03-LTS-SP2/index.html">openEuler-22.03-LTS-SP2</a></dd>
      <dd><a href="../../../openEuler-22.03-LTS-SP3/index.html">openEuler-22.03-LTS-SP3</a></dd>
      <dd><a href="../../../openEuler-22.03-LTS-SP4/index.html">openEuler-22.03-LTS-SP4</a></dd>
      <dd><a href="../../../openEuler-22.09/index.html">openEuler-22.09</a></dd>
      <dd><a href="../../../openEuler-23.03/index.html">openEuler-23.03</a></dd>
      <dd><a href="../../../openEuler-23.09/index.html">openEuler-23.09</a></dd>
      <dd><a href="../../../openEuler-24.03-LTS/yocto/yocto_quick_start_manual/bitbake_metadata.html">openEuler-24.03-LTS</a></dd>
      <dd><a href="bitbake_metadata.html">openEuler-24.09</a></dd>
      <dd><a href="../../../sync-pr2495-openEuler-24.03-LTS-to-master/yocto/yocto_quick_start_manual/bitbake_metadata.html">sync-pr2495-openEuler-24.03-LTS-to-master</a></dd>
    </dl>
  </div>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>