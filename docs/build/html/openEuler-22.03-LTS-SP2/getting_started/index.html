<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>快速上手 &mdash; openEuler Embedded在线文档 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="版本说明" href="../releases/index.html" />
    <link rel="prev" title="总体介绍" href="../introduction/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> openEuler Embedded在线文档
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">介绍与概述</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">总体介绍</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">快速上手</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">简介</a></li>
<li class="toctree-l2"><a class="reference internal" href="#arm64-qemu">构建 ARM64 QEMU 镜像</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">1. 安装必要的主机包</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">2. 初始化oebuild构建环境</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">3. 开始构建</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">4. 运行镜像</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sdk">基于SDK的应用开发</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">1. 构建SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-openeuler-embedded-sdk">2. 安装SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sdkhello-world">3. 使用SDK编译hello world样例</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">4. 使用SDK编译内核模块样例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id10">了解更多</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">版本说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">常见问题</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">指导手册</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">关键特性</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bsp/index.html">南向支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="../yocto/index.html">构建系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop_help/index.html">开发帮助</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/index.html">使用与配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/index.html">基础设施</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">openEuler Embedded在线文档</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>快速上手</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<span id="id1"></span><h1>快速上手<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<section id="id2">
<h2>简介<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>openEuler Embedded是基于openEuler社区面向嵌入式场景的Linux版本。由于嵌入式系统应用受到多个因素的约束，如资源、功耗、多样性等，
使得面向服务器领域的Linux及相应的构建系统很难满足嵌入式场景的要求，因此业界广泛采用 <a class="reference external" href="https://www.yoctoproject.org/">Yocto</a>
来定制化构建嵌入式Linux。</p>
<p>openEuler Embedded当前也采用的Yocto构建，但实现了与openEuler其他版本代码同源，本章节将介绍如何使用 <a class="reference external" href="https://gitee.com/openeuler/yocto-meta-openeuler">yocto-meta-openeuler</a>
项目构建 ARM64 QEMU 镜像，以及如何基于镜像完成基本的嵌入式Linux应用开发。建议按照指导步骤完成镜像构建和运行，以熟悉 <cite>yocto-meta-openeuler</cite> 的开发流程，树莓派等其它镜像的构建开发流程类似，具体可参阅 <a class="reference internal" href="../bsp/index.html#bsp"><span class="std std-ref">南向支持</span></a> 章节。</p>
</section>
<hr class="docutils" />
<section id="arm64-qemu">
<h2>构建 ARM64 QEMU 镜像<a class="headerlink" href="#arm64-qemu" title="Permalink to this headline">¶</a></h2>
<p>openEuler Embedded采用yocto构建，但通过 <a class="reference external" href="https://gitee.com/openeuler/oebuild">oebuild</a> 简化了构建流程。按照以下步骤可以快速构建出一个openEuler Embedded镜像，包括工具链。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><div class="line-block">
<div class="line">当前 <strong>仅支持在x86_64位的Linux环境</strong> 下使用 oebuild 进行构建，并且要在 <strong>普通用户</strong> 下进行 oebuild 的安装运行。更多关于 oebuild 的介绍请参阅 <a class="reference internal" href="../yocto/oebuild.html#openeuler-embedded-oebuild"><span class="std std-ref">oebuild 介绍</span></a> 章节。</div>
</div>
</li>
<li><p>openEuler Embedded 的 CI 会归档最新的构建镜像，若希望快速获取可用的镜像，请访问 <a class="reference external" href="http://121.36.84.172/dailybuild/openEuler-Mainline/">dailybuild</a> ，在 <code class="docutils literal notranslate"><span class="pre">dailybuild/openEuler-Mainline/openeuler-xxxx-xx-xx/embedded_img</span></code> 中可以下载镜像。</p></li>
</ul>
</div>
<section id="id3">
<h3>1. 安装必要的主机包<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>需要在构建主机上安装必要的主机包，包括oebuild及其运行依赖：</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-b3BlbkV1bGVy" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-b3BlbkV1bGVy" name="b3BlbkV1bGVy" role="tab" tabindex="0">openEuler</button><button aria-controls="panel-0-VWJ1bnR1" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-VWJ1bnR1" name="VWJ1bnR1" role="tab" tabindex="-1">Ubuntu</button></div><div aria-labelledby="tab-0-b3BlbkV1bGVy" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-b3BlbkV1bGVy" name="b3BlbkV1bGVy" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># 安装必要的软件包</span>
$ sudo yum install python3 python3-pip docker
$ pip install oebuild

<span class="c1"># 配置docker环境</span>
$ sudo usermod -a -G docker <span class="k">$(</span>whoami<span class="k">)</span>
$ sudo systemctl daemon-reload <span class="o">&amp;&amp;</span> sudo systemctl restart docker
$ sudo chmod o+rw /var/run/docker.sock
</pre></div>
</div>
</div><div aria-labelledby="tab-0-VWJ1bnR1" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-0-VWJ1bnR1" name="VWJ1bnR1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># 安装必要的软件包</span>
$ sudo apt-get install python3 python3-pip docker docker.io
$ pip install oebuild

<span class="c1"># 配置docker环境</span>
$ sudo usermod -a -G docker <span class="k">$(</span>whoami<span class="k">)</span>
$ sudo systemctl daemon-reload <span class="o">&amp;&amp;</span> sudo systemctl restart docker
$ sudo chmod o+rw /var/run/docker.sock
</pre></div>
</div>
</div></div>
</div></blockquote>
</section>
<section id="id4">
<h3>2. 初始化oebuild构建环境<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>运行 oebuild 完成初始化工作，包括创建工作目录、拉取构建容器等，之后的构建都需要在 <code class="docutils literal notranslate"><span class="pre">&lt;work_dir&gt;</span></code> 下进行：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># &lt;work_dir&gt; 为要创建的工作目录</span>
$ oebuild init &lt;work_dir&gt;

<span class="c1"># 拉取构建容器、yocto-meta-openeuler 项目代码</span>
$ oebuild update
</pre></div>
</div>
</div></blockquote>
</section>
<section id="id5">
<h3>3. 开始构建<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>继续执行以下命令进行 <code class="docutils literal notranslate"><span class="pre">ARM64</span> <span class="pre">QEMU</span></code> 镜像的构建，<code class="docutils literal notranslate"><span class="pre">build_arm64</span></code> 为该镜像的构建目录：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># 所有的构建工作都需要在 oebuild 工作目录下进行</span>
$ <span class="nb">cd</span> &lt;work_dir&gt;

<span class="c1"># 为 openeuler-image-qemu-arm64 镜像创建配置文件</span>
$ oebuild generate -p aarch64-std -d build_arm64

<span class="c1"># 根据提示进入 build_arm64 构建目录，并开始构建</span>
$ oebuild bitbake openeuler-image
</pre></div>
</div>
</div></blockquote>
</section>
<section id="id6">
<h3>4. 运行镜像<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>完成构建后，在构建目录下的 <code class="docutils literal notranslate"><span class="pre">output</span></code> 目录下可以看到如下文件：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">zImage</span></code>: 内核镜像，基于openEuler社区Linux 5.10代码构建；</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">openeuler-image-qemu-xxx.cpio.gz</span></code>: 标准根文件系统镜像， 进行了必要安全加固，增加了audit、cracklib、OpenSSH、Linux PAM、shadow、iSula容器等所支持的软件包；</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">openeuler-image-qemu-aarch64-xxx.iso</span></code>: iso格式的镜像，可用于制作U盘启动盘；</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vmlinux</span></code>: 对应的vmlinux，可用于内核调试。</p></li>
</ul>
<p>在主机上通过以下命令安装QEMU:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">openEuler</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">Ubuntu</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><p>$ sudo yum install qemu-system-aarch64</p>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><p>$ sudo apt-get install qemu-system-arm</p>
</div></div>
<p>之后，通过以下命令启动镜像：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>qemu-system-aarch64 -M virt-4.0 -m 1G -cpu cortex-a57 -nographic <span class="se">\</span>
    -kernel zImage <span class="se">\</span>
    -initrd openeuler-image-qemu-aarch64-*.rootfs.cpio.gz
</pre></div>
</div>
<p>QEMU运行成功并登录后，将会呈现openEuler Embedded的Shell。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>由于标准根文件系统镜像进行了安全加固，因此第一次启动时，需要为登录用户名root设置密码，且密码强度有相应要求，需要 <strong>数字、字母、特殊字符组合最少8位</strong>，例如openEuler&#64;2023</p></li>
<li><p>如果想了解有关运行 QEMU 的更多帮助信息，包括如何使能网络、如何共享主机文件等，请参阅开发手册中的 <a class="reference internal" href="../develop_help/qemu/qemu_start.html#qemu-start"><span class="std std-ref">QEMU使用</span></a> 章节。</p></li>
</ul>
</div>
</div></blockquote>
</section>
</section>
<hr class="docutils" />
<section id="sdk">
<h2>基于SDK的应用开发<a class="headerlink" href="#sdk" title="Permalink to this headline">¶</a></h2>
<p>嵌入式往往面临资源受限的问题，包括处理器性能、内存容量、存储空间等。因此，需要使用交叉编译器在构建主机上编译目标代码，以在嵌入式系统上运行。</p>
<p>openEuler Embedded提供了SDK自解压安装包，包含了应用程序开发所依赖的交叉编译器、库、头文件，下面将介绍如何构建ARM64的SDK，以及如何使用SDK进行用户态程序、内核模块的开发。</p>
<section id="id7">
<h3>1. 构建SDK<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>进入到镜像构建目录 <code class="docutils literal notranslate"><span class="pre">build_arm64</span></code>，执行以下命令：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>oebuild bitbake openeuler-image -c do_populate_sdk
</pre></div>
</div>
<p>构建完成后，在 <code class="docutils literal notranslate"><span class="pre">output</span></code> 目录下可以看到SDK安装包：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">openeuler-glibc-x86_64-xxxxx-toolchain-xxxx.sh</span></code>: openEuler Embedded SDK自解压安装包，SDK包含了进行开发（用户态程序、内核模块等)所必需的工具、库和头文件等。</p></li>
</ul>
</div></blockquote>
</section>
<section id="install-openeuler-embedded-sdk">
<span id="id8"></span><h3>2. 安装SDK<a class="headerlink" href="#install-openeuler-embedded-sdk" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul>
<li><p><strong>安装依赖软件包</strong></p>
<p>使用SDK开发内核模块需要安装一些必要的软件包，运行如下命令：</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-2-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-2-2-0" name="2-0" role="tab" tabindex="0">openEuler</button><button aria-controls="panel-2-2-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-1" name="2-1" role="tab" tabindex="-1">Ubuntu</button></div><div aria-labelledby="tab-2-2-0" class="sphinx-tabs-panel" id="panel-2-2-0" name="2-0" role="tabpanel" tabindex="0"><p>$ sudo yum install make gcc g++ flex bison gmp-devel libmpc-devel openssl-devel elfutils-libelf-devel</p>
</div><div aria-labelledby="tab-2-2-1" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-1" name="2-1" role="tabpanel" tabindex="0"><p>$ sudo apt-get install make gcc g++ flex bison libgmp3-dev libmpc-dev libssl-dev libelf-dev</p>
</div></div>
</li>
<li><p><strong>执行SDK自解压安装脚本</strong></p>
<p>运行如下命令：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sh openeuler-glibc-x86_64-openeuler-image-aarch64-qemu-aarch64-toolchain-*.sh
</pre></div>
</div>
<p>根据提示输入工具链的安装路径，默认路径是 <code class="file docutils literal notranslate"><span class="pre">/opt/openeuler/&lt;openeuler</span> <span class="pre">version&gt;</span></code>，若不设置，则按默认路径安装；也可以配置相对路径或绝对路径。
其中 “*” 代表不同的版本。</p>
<p>一个例子如下：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sh openeuler-glibc-x86_64-openeuler-image-aarch64-qemu-aarch64-toolchain-*.sh
<span class="go">openEuler embedded(openEuler Embedded Reference Distro) SDK installer version *</span>
<span class="go">================================================================</span>
<span class="go">Enter target directory for SDK (default: /opt/openeuler/&lt;openeuler version&gt;): sdk</span>
<span class="go">You are about to install the SDK to &quot;/usr1/openeuler/sdk&quot;. Proceed [Y/n]? y</span>
<span class="go">Extracting SDK...............................................done</span>
<span class="go">Setting it up...SDK has been successfully set up and is ready to be used.</span>
<span class="go">Each time you wish to use the SDK in a new shell session, you need to source the environment setup script e.g.</span>
<span class="gp">$ </span>. /usr1/openeuler/sdk/environment-setup-aarch64-openeuler-linux
</pre></div>
</div>
</li>
<li><p><strong>设置SDK环境变量</strong></p>
<p>前一步执行结束最后已打印source命令，运行即可。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>. /usr1/openeuler/sdk/environment-setup-aarch64-openeuler-linux
</pre></div>
</div>
</li>
<li><p><strong>查看是否安装成功</strong></p>
<p>运行如下命令，查看是否安装成功、环境设置成功。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>aarch64-openeuler-linux-gcc -v
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</section>
<section id="sdkhello-world">
<h3>3. 使用SDK编译hello world样例<a class="headerlink" href="#sdkhello-world" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ol class="arabic">
<li><p><strong>准备代码</strong></p>
<p>以构建一个hello world程序为例，运行在openEuler Embedded根文件系统镜像中。</p>
<p>创建一个 <code class="file docutils literal notranslate"><span class="pre">hello.c</span></code> 文件，源码如下：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;hello world</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>编写CMakeLists.txt，和hello.c文件放在同一个目录。</p>
<div class="highlight-CMake notranslate"><div class="highlight"><pre><span></span><span class="nb">project</span><span class="p">(</span><span class="s">hello</span> <span class="s">C</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">hello</span> <span class="s">hello.c</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>编译生成二进制</strong></p>
<p>进入 <code class="file docutils literal notranslate"><span class="pre">hello.c</span></code> 文件所在目录，使用工具链编译, 命令如下：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake ..
<span class="gp">$ </span>make
</pre></div>
</div>
<p>把编译好的hello程序拷贝到openEuler Embedded系统中。</p>
</li>
<li><p><strong>运行用户态程序</strong></p>
<p>在openEuler Embedded系统中运行hello程序。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./hello
</pre></div>
</div>
<p>如运行成功，则会输出 <code class="docutils literal notranslate"><span class="pre">hello</span> <span class="pre">world</span></code>。</p>
</li>
</ol>
</div></blockquote>
</section>
<section id="id9">
<h3>4. 使用SDK编译内核模块样例<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ol class="arabic">
<li><p><strong>准备代码</strong></p>
<p>以编译一个最简单的内核模块为例，运行在openEuler Embedded内核中。</p>
<p>创建一个 <code class="file docutils literal notranslate"><span class="pre">hello.c</span></code> 文件，源码如下：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/init.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/module.h&gt;</span><span class="cp"></span>

<span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">hello_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">printk</span><span class="p">(</span><span class="s">&quot;Hello, openEuler Embedded!</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">hello_exit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">printk</span><span class="p">(</span><span class="s">&quot;Byebye!&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">module_init</span><span class="p">(</span><span class="n">hello_init</span><span class="p">);</span><span class="w"></span>
<span class="n">module_exit</span><span class="p">(</span><span class="n">hello_exit</span><span class="p">);</span><span class="w"></span>

<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>编写Makefile，和hello.c文件放在同一个目录：</p>
<div class="highlight-Makefile notranslate"><div class="highlight"><pre><span></span><span class="nv">KERNELDIR</span> <span class="o">:=</span> <span class="si">${</span><span class="nv">KERNEL_SRC</span><span class="si">}</span>
<span class="nv">CURRENT_PATH</span> <span class="o">:=</span> <span class="k">$(</span>shell <span class="nb">pwd</span><span class="k">)</span>

<span class="nv">target</span> <span class="o">:=</span> hello
<span class="nv">obj-m</span> <span class="o">:=</span> <span class="k">$(</span>target<span class="k">)</span>.o

<span class="nv">build</span> <span class="o">:=</span> kernel_modules

<span class="nf">kernel_modules</span><span class="o">:</span>
        <span class="k">$(</span>MAKE<span class="k">)</span> -C <span class="k">$(</span>KERNELDIR<span class="k">)</span> <span class="nv">M</span><span class="o">=</span><span class="k">$(</span>CURRENT_PATH<span class="k">)</span> modules
<span class="nf">clean</span><span class="o">:</span>
        <span class="k">$(</span>MAKE<span class="k">)</span> -C <span class="k">$(</span>KERNELDIR<span class="k">)</span> <span class="nv">M</span><span class="o">=</span><span class="k">$(</span>CURRENT_PATH<span class="k">)</span> clean
</pre></div>
</div>
<p><code class="file docutils literal notranslate"><span class="pre">KERNEL_SRC</span></code> 为SDK中内核源码树的目录，该变量在安装SDK后会被自动设置。</p>
</li>
<li><p><strong>编译生成内核模块</strong></p>
<p>进入hello.c文件所在目录，使用工具链编译，命令如下：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make
</pre></div>
</div>
<p>将编译好的hello.ko拷贝到openEuler Embedded系统中。</p>
</li>
<li><p><strong>插入内核模块</strong></p>
<p>在openEuler Embedded系统中插入内核模块:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>insmod hello.ko
</pre></div>
</div>
<p>如运行成功，则会在内核日志中出现 <code class="docutils literal notranslate"><span class="pre">Hello,</span> <span class="pre">openEuler</span> <span class="pre">Embedded!</span></code>。</p>
</li>
</ol>
</div></blockquote>
</section>
</section>
<hr class="docutils" />
<section id="id10">
<h2>了解更多<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>相信根据上述指导完成了QEMU镜像的构建、运行后，您对 openEuler Embedded 的开发构建流程已经有所熟悉，但也许您也会有一些疑惑：
openEuler Embedded还能用来做些什么？如何理解学习yocto？如何更深入地参与项目的讨论建设？</p>
<p>您可以阅读文档相关的介绍，或参与SIG组例会，更深入地了解openEuler Embedded：</p>
<ul>
<li><div class="line-block">
<div class="line"><a class="reference internal" href="../features/index.html#openeuler-embedded-features"><span class="std std-ref">openEuler Embedded 关键特性</span></a>：</div>
<div class="line">可以了解openEuler Embedded 正在进行的一些技术探索，包括ROS的支持，如何使用openEuler Embedded控制originbot小车；包括混合关键性系统的支持，如何在一颗SoC上同时部署Linux和RTOS；也包括嵌入式容器iSulad的支持等。</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a class="reference internal" href="../bsp/index.html#bsp"><span class="std std-ref">openEuler Embedded 南向支持</span></a>：</div>
<div class="line">可以将openEuler Embedded部署在不同架构的板子上，包括树莓派4B、海思的Hi3093、瑞芯微的RK3568，以及x86_64架构的工控机，RISC-V的visionfive2等。</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a class="reference internal" href="../yocto/index.html#yocto"><span class="std std-ref">openEuler Embedded 构建系统</span></a>：</div>
<div class="line">可以了解yocto的一些基础知识，学习如何新增一个软件包，如何增加新的南向BSP支持等。</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a class="reference external" href="https://mailweb.openeuler.org/hyperkitty/list/dev&#64;openeuler.org/">openEuler mailweb</a> ：</div>
<div class="line">可以订阅openEuler邮件列表，收取 Yocto &amp; Embedded SIG联合例会的通知，SIG例会双周举行一次，会议时间固定为北京时间的周四下午两点半。</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a class="reference external" href="https://space.bilibili.com/527064077/channel/collectiondetail?sid=230709">SIG组例会视频</a> ：</div>
<div class="line">可以观看往期的SIG组例会回放，了解openEuler Embedded的发展以及一些有趣的知识分享。</div>
</div>
</li>
</ul>
<p>非常希望您在深入了解openEuler Embedded之后，能有一个良好的体验。对于遇到的问题，欢迎到SIG组例会上交流，或者在 <a class="reference external" href="https://gitee.com/openeuler/yocto-meta-openeuler/issues">Issues</a> 中反馈，同时也十分欢迎您的提交。</p>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../introduction/index.html" class="btn btn-neutral float-left" title="总体介绍" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../releases/index.html" class="btn btn-neutral float-right" title="版本说明" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, openEuler Embedded.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: openEuler-22.03-LTS-SP2
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Branches</dt>
      <dd><a href="../../master/getting_started/index.html">master</a></dd>
      <dd><a href="../../openEuler-21.09/getting_started/index.html">openEuler-21.09</a></dd>
      <dd><a href="../../openEuler-22.03-LTS/getting_started/index.html">openEuler-22.03-LTS</a></dd>
      <dd><a href="../../openEuler-22.03-LTS-SP1/getting_started/index.html">openEuler-22.03-LTS-SP1</a></dd>
      <dd><a href="index.html">openEuler-22.03-LTS-SP2</a></dd>
      <dd><a href="../../openEuler-22.09/getting_started/index.html">openEuler-22.09</a></dd>
      <dd><a href="../../openEuler-23.03/getting_started/index.html">openEuler-23.03</a></dd>
      <dd><a href="../../rk_next/getting_started/index.html">rk_next</a></dd>
    </dl>
  </div>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>