.. _overall_perform:

1.2 综合性能
#####################

1.2.1 测试目的
*************************************
分别基于OEE、OEE-RT 以及 OEE-RT + Jailhouse，评估系统在某些场景下的综合性能表现及差异。
例如CPU运算性能等。


1.2.2 CPU运算性能
*********************

测试工具
===============

-  sysbench

测试方案
===============

    开启若干线程，使用sysbench工具，在10s内对指定数量的线程进行循环10000素数运算获取CPU的计算性能。

    测试指令：

    .. code-block:: console

        taskset -c 2 sysbench cpu --threads=1 run


    指令在串口终端下执行。
    
测试结果
===============

    进行五轮测试，取五次平均值统计结果如下：

.. list-table:: 表1-1 CPU运算性能结果
    :align: center

    * - **测试工具**
      - **测试项**
      - **OEE**
      - **OEE-RT**
      - **OEE-RT+Jailhouse**
    * - sysbench cpu
      - 每秒可处理事件数
      - 894.68
      - 1010.634
      - 1009.278
    * - 
      - 事件最小处理时间(ms)
      - 1.02
      - 0.99
      - 0.99
    * - 
      - 事件平均处理时间(ms)
      - 1.11
      - 0.99
      - 0.99
    * - 
      - 事件最大处理时间(ms)
      - 17.08
      - 1.01
      - 1.006
    * - 
      - 95%事件处理时间(ms)
      - 1.07
      - 0.99
      - 0.99

测试结果分析
==============
1. 在每秒处理的事件数量上，OEE-RT比OEE性能提升10%以上。
2. 在事件最大处理时间上，OEE-RT从OEE的17.08ms提升到1.01ms，性能提升非常明显。
3. OEE-RT在添加Jailhouse虚拟化后，CPU性能几乎不受影响。

测试结论
==============
1. 在CPU运算性能方面，OEE-RT的性能全面优于OEE。
2. OEE-RT在添加Jailhouse后，对OEE-RT的性能几乎没有影响，各项指标性能相当。

