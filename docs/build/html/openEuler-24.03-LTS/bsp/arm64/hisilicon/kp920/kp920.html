<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>鲲鹏920 &mdash; openEuler Embedded在线文档 24.03 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Hi3093 镜像构建与说明" href="../hi3093/hi3093.html" />
    <link rel="prev" title="基于海思(Hisilicon)SoC的硬件" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html" class="icon icon-home"> openEuler Embedded在线文档
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">介绍与概述</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/index.html">总体介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/index.html">快速上手</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../releases/index.html">版本说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../test_data/index.html">测试数据</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">指导手册</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../../user_guide/index.html">用户使用指导</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../features/index.html">关键特性指导</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">南向硬件支持与使用指导</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">ARM64硬件</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../index.html">基于海思(Hisilicon)SoC的硬件</a><ul class="current">
<li class="toctree-l5 current"><a class="current reference internal" href="#">鲲鹏920</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hi3093/hi3093.html">Hi3093 镜像构建与说明</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hieulerpi/index.html">海鸥派</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../myir/index.html">米尔系列硬件</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../orangepi/index.html">香橙派系列硬件</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../phytium/index.html">基于飞腾(Phytium)SoC的硬件</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../raspberrypi4/index.html">树莓派4B</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rockchip/index.html">基于瑞芯微(Rockchip)SoC的硬件</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../x86/index.html">x86硬件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../riscv/index.html">RISCV硬件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../arm/index.html">ARM硬件</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../oebuild/index.html">oebuild使用指导</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../infrastructure/index.html">基础设施指导</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../linux/index.html">其他配置指导</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_guide/index.html">开发及贡献指导</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/index.html">常见问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../references/index.html">参考文档</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">openEuler Embedded在线文档</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../../../user_guide/index.html">用户使用指导</a> &raquo;</li>
          <li><a href="../../../index.html">南向硬件支持与使用指导</a> &raquo;</li>
          <li><a href="../../index.html">ARM64硬件</a> &raquo;</li>
          <li><a href="../index.html">基于海思(Hisilicon)SoC的硬件</a> &raquo;</li>
      <li>鲲鹏920</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="board-kp920">
<span id="id1"></span><h1>鲲鹏920<a class="headerlink" href="#board-kp920" title="Permalink to this headline">¶</a></h1>
<section id="id2">
<h2>基本介绍<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>鲲鹏920是目前业界领先的ARM-based处理器。该处理器采用7nm制造工艺，基于ARM架构授权，由华为公司自主设计完成，主频可达 2.6 GHz。详细配置可参考： <a class="reference external" href="https://www.hisilicon.com/cn/products/Kunpeng/Huawei-Kunpeng/Huawei-Kunpeng-920">鲲鹏920 介绍</a></p>
<p>目前openEuler Embedded已经支持鲲鹏920的镜像构建、安装及运行。</p>
</section>
<hr class="docutils" />
<section id="id4">
<h2>构建说明<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>参照 <a class="reference internal" href="../../../../oebuild/userguide/install/index.html#oebuild-install"><span class="std std-ref">安装步骤</span></a> 完成oebuild安装，并详细了解构建过程</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>例如
<span class="gp">$ </span>oebuild init my_workspace

<span class="gp"># </span>上述命令没有指定分支，使用默认分支master
<span class="gp">$ </span><span class="nb">cd</span> xxx/my_workspace
<span class="gp">$ </span>oebuild update
</pre></div>
</div>
</li>
<li><p>依次执行以下命令完成构建</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>生成kp920构建配置文件，若需额外加入特性，见-f列表<span class="o">(</span>oebuild generate -l<span class="o">)</span>，下例启用systemd和软实时功能
<span class="gp">$ </span>oebuild generate -p kp920 -f systemd -f rt -d build_kp920

<span class="gp"># </span>按提示进入构建目录 build_kp920 后，执行如下命令进入bitbake环境，进入构建交互终端
<span class="gp">$ </span>oebuild bitbake

<span class="gp"># </span>构建镜像
<span class="gp">$ </span>bitbake openeuler-image

<span class="gp"># </span>构建sdk
<span class="gp">$ </span>bitbake openeuler-image -c populate_sdk
</pre></div>
</div>
<p>二进制产物介绍（对应output目录）：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">openeuler-glibc-x86_64-openeuler-image-aarch64-kp920-toolchain-&lt;version&gt;.sh</span></code>: SDK工具链</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">openeuler-image-kp920-[时间戳].iso</span></code>: 适用鲲鹏920的ISO镜像，可直接用于部署</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vmlinux</span></code>: 备用调试内核</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Image</span></code>: 备用内核镜像</p></li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>需要其他功能时，请在oebuild初始化时通过 <code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">features</span></code> 添加对应的 feature。见-f列表(oebuild generate -l)</p>
</div>
</section>
<hr class="docutils" />
<section id="id5">
<h2>安装说明<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>使用光驱安装：</p></li>
</ol>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>参考 <a class="reference internal" href="../../../x86/HVAEIPC-M10/m10.html#iso-install"><span class="std std-ref">openEuler Embedded ISO 镜像安装说明</span></a>，若使用 BMC 进行安装，请在 BMC 界面挂载光驱并选择光驱启动之后进行镜像安装。</p>
</div>
</div></blockquote>
<ol class="arabic" start="2">
<li><p>使用PXE安装：</p>
<p>2.1 环境准备</p>
<blockquote>
<div><p>执行PXE安装需要准备一台PXE服务器，并确保需要安装镜像的设备可以与PXE服务器建立连接。PXE服务器用于存放 openEuler Embedded 镜像与各项配置文件，以便目标机器通过连接PXE服务器，进行PXE安装。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>下文将PXE服务器 IP 设置为 192.168.122.10，目标机器需要与PXE服务器在同网段下。</p>
</div>
</div></blockquote>
<p>2.2 PXE服务器配置</p>
<ol class="arabic">
<li><p>设置HTTP服务</p>
<p>通过以下命令安装 httpd 服务，并进行启动和激活：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>yum install -y httpd
<span class="gp"># </span>systemctl start httpd
<span class="gp"># </span>systemctl <span class="nb">enable</span> httpd
</pre></div>
</div>
</li>
<li><p>设置TFTP服务</p>
<p>通过以下命令安装 tftp 服务，并进行相关配置：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>yum install -y tftp-server xinetd
<span class="gp"># </span>vim /etc/xinetd.d/tftp
<span class="go">  service tftp</span>
<span class="go">  {</span>
<span class="go">  socket_type = dgram</span>
<span class="go">  protocol = udp</span>
<span class="go">  wait = yes</span>
<span class="go">  user = root</span>
<span class="go">  server = /usr/sbin/in.tftpd</span>
<span class="go">  server_args = -s /var/lib/tftpboot</span>
<span class="go">  disable = no</span>
<span class="go">  per_source = 11</span>
<span class="go">  cps = 100 2</span>
<span class="go">  flags = IPv4</span>
<span class="go">  }</span>
<span class="gp"># </span>systemctl start tftp
<span class="gp"># </span>systemctl <span class="nb">enable</span> tftp
<span class="gp"># </span>systemctl start xinetd
<span class="gp"># </span>systemctl status xinetd
<span class="gp"># </span>systemctl <span class="nb">enable</span> xinetd
</pre></div>
</div>
</li>
<li><p>设置DHCP服务</p>
<p>通过以下命令安装 dhcp 服务，并进行相关配置：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>yum install -y dhcp
<span class="gp"># </span>vim /etc/dhcp/dhcpd.conf
<span class="go">  authoritative</span>
<span class="go">  ddns-update-style interim;</span>
<span class="go">  ignore client-updates;</span>
<span class="go">  subnet 192.168.122.0 netmask 255.255.255.0 {</span>
<span class="go">      range 192.168.122.100 192.168.122.200;     # 动态IP范围</span>
<span class="go">      next-server 192.168.122.10;                # PXE服务器IP地址</span>
<span class="go">      filename &quot;grubaa64.efi&quot;;                   # 默认的grub文件名，需要与下文中下载的grub文件名保持一致</span>
<span class="go">      option routers 192.168.122.1;              # 网关地址</span>
<span class="go">      option subnet-mask 255.255.255.0;          # 子网掩码</span>
<span class="go">      default-lease-time 86400;</span>
<span class="go">      max-lease-time 172800;</span>
<span class="go">  }</span>

<span class="gp"># </span>systemctl start dhcpd
<span class="gp"># </span>systemctl <span class="nb">enable</span> dhcpd
</pre></div>
</div>
</li>
<li><p>安装源的制作</p>
<p>通过以下命令本地挂载 openEuler Embedded ISO镜像：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>mkdir -p /mnt/iso
<span class="gp"># </span>sudo mount openeuler_embedded.iso /mnt/iso    <span class="c1"># 镜像名称请以实际为准</span>
</pre></div>
</div>
</li>
<li><p>准备PXE安装所需文件</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>准备启动引导文件：</p></li>
</ol>
<blockquote>
<div><p>下载 <a class="reference external" href="https://mirrors.nju.edu.cn/openeuler/openEuler-24.03-LTS/everything/aarch64/EFI/BOOT/grubaa64.efi">grubaa64.efi</a>，之后，通过以下命令，将grub放在tftpboot目录，并创建grub.cfg：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>准备引导文件：
<span class="gp"># </span>mkdir -p /var/lib/tftpboot
<span class="gp"># </span>cp grubaa64.efi /var/lib/tftpboot
<span class="gp"># </span>cp /mnt/iso/Image /var/lib/tftpboot
<span class="gp"># </span>cp /mnt/iso/initrd /var/lib/tftpboot

<span class="gp"># </span>创建 grub.cfg
<span class="gp"># </span>vim /var/lib/tftpboot/grub.cfg
<span class="go">  set default=&quot;1&quot;</span>

<span class="go">  function load_video {</span>
<span class="go">    if [ x$feature_all_video_module = xy ]; then</span>
<span class="go">      insmod all_video</span>
<span class="go">    else</span>
<span class="go">      insmod efi_gop</span>
<span class="go">      insmod efi_uga</span>
<span class="go">      insmod ieee1275_fb</span>
<span class="go">      insmod vbe</span>
<span class="go">      insmod vga</span>
<span class="go">      insmod video_bochs</span>
<span class="go">      insmod video_cirrus</span>
<span class="go">    fi</span>
<span class="go">  }</span>

<span class="go">  load_video</span>
<span class="go">  set gfxpayload=keep</span>
<span class="go">  insmod gzio</span>
<span class="go">  insmod part_gpt</span>
<span class="go">  insmod ext2</span>

<span class="go">  set timeout=60</span>

<span class="go">  menuentry &#39;openEuler Embedded PXE Install&#39; {</span>
<span class="go">    linux /Image LABEL=install-pxe install_cfg=http://192.168.122.10/install_pxe.cfg  root=/dev/ram0 console=tty1 crashkernel=256M</span>
<span class="go">    initrd /initrd</span>
<span class="go">  }</span>
</pre></div>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li><p>准备 ISO 安装所需文件：</p></li>
</ol>
<blockquote>
<div><p>PXE安装需要iso镜像、iso镜像的sha256校验值，以及配置文件 <code class="docutils literal notranslate"><span class="pre">install_pxe.cfg</span></code>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>假设iso镜像名为 openeuler_embedded.iso，sha256校验值文件为 openeuler_embedded.iso.sha256sum
<span class="gp"># </span>cp openeuler_embedded.iso /var/lib/tftpboot
<span class="gp"># </span>cp openeuler_embedded.iso.sha256sum /var/lib/tftpboot
<span class="gp"># </span>chmod +rx /var/lib/tftpboot
<span class="gp"># </span>chmod +r /var/lib/tftpboot/openeuler_embedded.iso

<span class="gp"># </span>vim /var/lib/tftpboot/install_pxe.cfg
<span class="go"> INSTALL_ISO=&quot;openeuler_embedded.iso&quot;                      # openEuler Embedded 镜像名称</span>
<span class="go"> TARGET_DEVICE_NAME=&quot;sda&quot;                                  # 目标机器预备安装系统的盘</span>
<span class="go"> INSTALL_ISO_SHA256=&quot;openeuler_embedded.iso.sha256sum&quot;     # 镜像sha256sum校验值文件</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<p>2.3 安装步骤</p>
<p>在 BMC 界面选择 <code class="docutils literal notranslate"><span class="pre">PXE</span></code> 启动项，重启系统开始自动化安装，系统安装完成后，会提示：<code class="docutils literal notranslate"><span class="pre">Installation</span> <span class="pre">successful.</span> <span class="pre">Remove</span> <span class="pre">your</span> <span class="pre">installation</span> <span class="pre">media</span> <span class="pre">and</span> <span class="pre">press</span> <span class="pre">ENTER</span> <span class="pre">to</span> <span class="pre">reboot.</span></code>
之后可以在 BMC 界面选择 <code class="docutils literal notranslate"><span class="pre">BIOS</span></code> 启动项，按 Enter 键重启机器，重启后进入 BIOS 界面选择对应的磁盘启动项，进行系统启动。</p>
</li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="基于海思(Hisilicon)SoC的硬件" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../hi3093/hi3093.html" class="btn btn-neutral float-right" title="Hi3093 镜像构建与说明" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, openEuler Embedded.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: openEuler-24.03-LTS
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Branches</dt>
      <dd><a href="../../../../../master/bsp/arm64/hisilicon/kp920/kp920.html">master</a></dd>
      <dd><a href="../../../../../openEuler-21.09/index.html">openEuler-21.09</a></dd>
      <dd><a href="../../../../../openEuler-22.03-LTS/index.html">openEuler-22.03-LTS</a></dd>
      <dd><a href="../../../../../openEuler-22.03-LTS-SP1/index.html">openEuler-22.03-LTS-SP1</a></dd>
      <dd><a href="../../../../../openEuler-22.03-LTS-SP2/index.html">openEuler-22.03-LTS-SP2</a></dd>
      <dd><a href="../../../../../openEuler-22.03-LTS-SP3/index.html">openEuler-22.03-LTS-SP3</a></dd>
      <dd><a href="../../../../../openEuler-22.03-LTS-SP4/index.html">openEuler-22.03-LTS-SP4</a></dd>
      <dd><a href="../../../../../openEuler-22.09/index.html">openEuler-22.09</a></dd>
      <dd><a href="../../../../../openEuler-23.03/index.html">openEuler-23.03</a></dd>
      <dd><a href="../../../../../openEuler-23.09/index.html">openEuler-23.09</a></dd>
      <dd><a href="kp920.html">openEuler-24.03-LTS</a></dd>
      <dd><a href="../../../../../openEuler-24.09/index.html">openEuler-24.09</a></dd>
      <dd><a href="../../../../../openEuler-25.03/bsp/arm64/hisilicon/kp920/kp920.html">openEuler-25.03</a></dd>
    </dl>
  </div>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>